{"version":3,"sources":["script.js"],"names":["mainDisplay","document","querySelector","helperDisplay","allButtons","querySelectorAll","buttons","digit","operator","clear","neg","equals","handleDigit","negativeOutput","checkIfNegative","textContent","toDisplay","freshStart","slice","toggleNegative","display","classList","contains","includes","startsWith","handleOperator","calculate","op","num1","Number","num2","result","doMaths","displayResult","formatResult","divideByZero","num","toFixed","replace","add","forEach","btn","addEventListener","clearAnswer","remove","removeEventListener"],"mappings":"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","file":"app.js","sourcesContent":["const mainDisplay = document.querySelector('.main-display');\r\nconst helperDisplay = document.querySelector('.helper-display');\r\nconst allButtons = document.querySelectorAll('.calculator button');\r\nconst buttons = {\r\n  digit: document.querySelectorAll('.digit'),\r\n  operator: document.querySelectorAll('.operator'),\r\n  clear: document.querySelector('.clear'),\r\n  neg: document.querySelector('.neg'),\r\n  equals: document.querySelector('.equals')\r\n};\r\n\r\n\r\nfunction handleDigit() {\r\n  // If the user said it's negative already, we should respect that decision\r\n  const negativeOutput = checkIfNegative(mainDisplay);\r\n\r\n  const digit = this.textContent;\r\n  // Is this a brand new number, or add it to the end of what's already there?\r\n  const toDisplay = freshStart(mainDisplay) ? digit : mainDisplay.textContent + digit;\r\n\r\n  mainDisplay.textContent = toDisplay.slice(0, 11); // Ensure it's not too long\r\n  if (negativeOutput) toggleNegative();\r\n}\r\n\r\n\r\nfunction freshStart(display) {\r\n  return (display.classList.contains('answer') || (display.textContent == 0 && !display.textContent.includes('.')));\r\n}\r\n\r\n\r\nfunction checkIfNegative(display) {\r\n  return display.textContent.startsWith('-') && mainDisplay.classList.contains('answer');\r\n}\r\n\r\n\r\nfunction handleOperator() {\r\n  helperDisplay.textContent = `${mainDisplay.textContent} ${this.textContent}`;\r\n  mainDisplay.textContent = '';\r\n}\r\n\r\n\r\nfunction clear() {\r\n  mainDisplay.textContent = 0;\r\n  helperDisplay.textContent = '';\r\n}\r\n\r\n\r\nfunction toggleNegative() {\r\n  if (mainDisplay.textContent.startsWith('-')) {\r\n    mainDisplay.textContent = `${mainDisplay.textContent.slice(1, 11)}`;\r\n  } else {\r\n    mainDisplay.textContent = `-${mainDisplay.textContent.slice(0, 10)}`;\r\n  }\r\n}\r\n\r\n\r\nfunction calculate() {\r\n  const op = helperDisplay.textContent.slice(-1) || '';\r\n  const num1 = Number(helperDisplay.textContent.slice(0, -2)) || '';\r\n  const num2 = Number(mainDisplay.textContent) || '';\r\n\r\n  const result = doMaths(op, num1, num2);\r\n\r\n  result === 'Error' ? displayResult(result) : displayResult(formatResult(result));\r\n}\r\n\r\n\r\nfunction doMaths(op, num1, num2) {\r\n  let result;\r\n  if (divideByZero(op, num2)) {\r\n    result = 'Error';\r\n  } else if (op === '+') {\r\n    result = num1 + num2;\r\n  } else if (op === '-') {\r\n    result = num1 - num2;\r\n  } else if (op === 'Ã—') {\r\n    result = num1 * num2;\r\n  } else if (op === '/') {\r\n    result = num1 / num2;\r\n  } else if (op === '%') {\r\n    result = num1 * (num2 / 100);\r\n  } else {\r\n    result = Number(mainDisplay.textContent) || 0;\r\n  }\r\n  return result;\r\n}\r\n\r\n\r\nfunction divideByZero(op, num) {\r\n  return (op === '/' && num == 0);\r\n}\r\n\r\n\r\nfunction formatResult(num) {\r\n  return num\r\n    .toFixed(10) // To string, not too long, properly rounded\r\n    .replace(/0+$/, '') // Remove any trailing zeroes\r\n    .replace(/\\.$/, '') // Remove trailing period\r\n    .slice(0, 10); // Necessary if it's a really big number with lots of decimals\r\n}\r\n\r\n\r\nfunction displayResult(result = '') {\r\n  mainDisplay.classList.add('answer');\r\n  helperDisplay.textContent = '';\r\n  mainDisplay.textContent = result;\r\n\r\n  allButtons.forEach(btn => btn.addEventListener('click', clearAnswer));\r\n}\r\n\r\n\r\nfunction clearAnswer() {\r\n  if (this.classList.contains('equals')) return; // Don't change anything if the user clicked equals again\r\n\r\n  mainDisplay.classList.remove('answer');\r\n  allButtons.forEach(btn => btn.removeEventListener('click', clearAnswer));\r\n}\r\n\r\n\r\nbuttons.digit.forEach(num => num.addEventListener('click', handleDigit));\r\nbuttons.operator.forEach(op => op.addEventListener('click', handleOperator));\r\nbuttons.clear.addEventListener('click', clear);\r\nbuttons.neg.addEventListener('click', toggleNegative);\r\nbuttons.equals.addEventListener('click', calculate);"]}