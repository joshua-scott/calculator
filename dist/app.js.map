{"version":3,"sources":["script.js"],"names":["mainDisplay","document","querySelector","helperDisplay","buttons","digit","querySelectorAll","operator","clear","neg","equals","handleDigit","textContent","length","Number","includes","handleOperator","toggleNegative","startsWith","slice","calculate","op","num1","num2","result","doMaths","output","formatResult","displayAnswer","num","toFixed","replace","ans","classList","add","forEach","btn","addEventListener","clearAnswer","contains","removeEventListener","remove"],"mappings":";;AAAA,MAAMA,cAAcC,SAASC,aAAT,CAAuB,eAAvB,CAApB;AACA,MAAMC,gBAAgBF,SAASC,aAAT,CAAuB,iBAAvB,CAAtB;AACA,MAAME,UAAU;AACdC,SAAOJ,SAASK,gBAAT,CAA0B,cAA1B,CADO;AAEdC,YAAUN,SAASK,gBAAT,CAA0B,iBAA1B,CAFI;AAGdE,SAAOP,SAASC,aAAT,CAAuB,cAAvB,CAHO;AAIdO,OAAKR,SAASC,aAAT,CAAuB,YAAvB,CAJS;AAKdQ,UAAQT,SAASC,aAAT,CAAuB,eAAvB;AALM,CAAhB;;AASA,SAASS,WAAT,GAAuB;AACrB,MAAIX,YAAYY,WAAZ,CAAwBC,MAAxB,GAAiC,EAArC,EAAyC;AACzC,MAAIC,OAAOd,YAAYY,WAAnB,MAAoC,CAAxC,EAA2C;AACzCZ,gBAAYY,WAAZ,GAA0B,KAAKA,WAA/B;AACD,GAFD,MAEO,IAAI,KAAKA,WAAL,KAAqB,GAArB,IAA4BZ,YAAYY,WAAZ,CAAwBG,QAAxB,CAAiC,GAAjC,CAAhC,EAAuE;AAC5E;AACD,GAFM,MAEA;AACLf,gBAAYY,WAAZ,IAA2B,KAAKA,WAAhC;AACD;AACF;;AAGD,SAASI,cAAT,GAA0B;AACxBb,gBAAcS,WAAd,GAA6B,GAAEZ,YAAYY,WAAY,IAAG,KAAKA,WAAY,EAA3E;AACAZ,cAAYY,WAAZ,GAA0B,EAA1B;AACD;;AAGD,SAASJ,KAAT,GAAiB;AACfR,cAAYY,WAAZ,GAA0B,CAA1B;AACAT,gBAAcS,WAAd,GAA4B,EAA5B;AACD;;AAGD,SAASK,cAAT,GAA0B;AACxB,MAAIjB,YAAYY,WAAZ,CAAwBM,UAAxB,CAAmC,GAAnC,CAAJ,EAA6C;AAC3ClB,gBAAYY,WAAZ,GAA2B,GAAEZ,YAAYY,WAAZ,CAAwBO,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,CAAqC,EAAlE;AACD,GAFD,MAEO;AACLnB,gBAAYY,WAAZ,GAA2B,IAAGZ,YAAYY,WAAZ,CAAwBO,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,CAAqC,EAAnE;AACD;AACF;;AAGD,SAASC,SAAT,GAAqB;AACnB;AACA,MAAIjB,cAAcS,WAAd,KAA8B,EAAlC,EAAsC;AACpC;AACD;;AAED,QAAMS,KAAKlB,cAAcS,WAAd,CAA0BO,KAA1B,CAAgC,CAAC,CAAjC,CAAX;AACA,QAAMG,OAAOR,OAAOX,cAAcS,WAAd,CAA0BO,KAA1B,CAAgC,CAAhC,EAAmC,CAAC,CAApC,CAAP,CAAb;AACA,QAAMI,OAAOT,OAAOd,YAAYY,WAAnB,CAAb;;AAEA;AACA,MAAIS,OAAO,GAAP,IAAcE,SAAS,CAA3B,EAA8B;AAC5BpB,kBAAcS,WAAd,GAA4B,EAA5B;AACAZ,gBAAYY,WAAZ,GAA0B,OAA1B;AACA;AACD;;AAED,QAAMY,SAASC,QAAQJ,EAAR,EAAYC,IAAZ,EAAkBC,IAAlB,CAAf;AACA,QAAMG,SAASC,aAAaH,MAAb,CAAf;;AAEAI,gBAAcF,MAAd;AACD;;AAGD,SAASD,OAAT,CAAiBJ,EAAjB,EAAqBC,IAArB,EAA2BC,IAA3B,EAAiC;AAC/B,MAAIC,MAAJ;AACA,MAAIH,OAAO,GAAX,EAAgB;AACdG,aAASF,OAAOC,IAAhB;AACD,GAFD,MAEO,IAAIF,OAAO,GAAX,EAAgB;AACrBG,aAASF,OAAOC,IAAhB;AACD,GAFM,MAEA,IAAIF,OAAO,GAAX,EAAgB;AACrBG,aAASF,OAAOC,IAAhB;AACD,GAFM,MAEA,IAAIF,OAAO,GAAX,EAAgB;AACrBG,aAASF,OAAOC,IAAhB;AACD,GAFM,MAEA,IAAIF,OAAO,GAAX,EAAgB;AACrBG,aAASF,QAAQC,OAAO,GAAf,CAAT;AACD;AACD,SAAOC,MAAP;AACD;;AAGD,SAASG,YAAT,CAAsBE,GAAtB,EAA2B;AACzB,SAAOA,IACJC,OADI,CACI,EADJ,EACQ;AADR,GAEJC,OAFI,CAEI,KAFJ,EAEW,EAFX,EAEe;AAFf,GAGJA,OAHI,CAGI,KAHJ,EAGW,EAHX,CAAP,CADyB,CAIF;AACxB;;AAGD,SAASH,aAAT,CAAuBI,GAAvB,EAA4B;AAC1BhC,cAAYiC,SAAZ,CAAsBC,GAAtB,CAA0B,QAA1B;AACA/B,gBAAcS,WAAd,GAA4B,EAA5B;AACAZ,cAAYY,WAAZ,GAA0BoB,GAA1B;;AAEA/B,WAASK,gBAAT,CAA0B,oBAA1B,EAAgD6B,OAAhD,CAAwDC,OAAO;AAC7DA,QAAIC,gBAAJ,CAAqB,OAArB,EAA8BC,WAA9B;AACD,GAFD;AAGD;;AAGD,SAASA,WAAT,GAAuB;AACrB,MAAI,KAAKL,SAAL,CAAeM,QAAf,CAAwB,QAAxB,CAAJ,EAAuC,OADlB,CAC0B;;AAE/CtC,WAASK,gBAAT,CAA0B,oBAA1B,EAAgD6B,OAAhD,CAAwDC,OAAO;AAC7DA,QAAII,mBAAJ,CAAwB,OAAxB,EAAiCF,WAAjC;AACD,GAFD;AAGAtC,cAAYiC,SAAZ,CAAsBQ,MAAtB,CAA6B,QAA7B;AACAzC,cAAYY,WAAZ,GAA0B,KAAKqB,SAAL,CAAeM,QAAf,CAAwB,UAAxB,IAAsC,EAAtC,GAA2C,CAArE;AACD;;AAEDnC,QAAQC,KAAR,CAAc8B,OAAd,CAAsBN,OAAOA,IAAIQ,gBAAJ,CAAqB,OAArB,EAA8B1B,WAA9B,CAA7B;AACAP,QAAQG,QAAR,CAAiB4B,OAAjB,CAAyBd,MAAMA,GAAGgB,gBAAH,CAAoB,OAApB,EAA6BrB,cAA7B,CAA/B;AACAZ,QAAQI,KAAR,CAAc6B,gBAAd,CAA+B,OAA/B,EAAwC7B,KAAxC;AACAJ,QAAQK,GAAR,CAAY4B,gBAAZ,CAA6B,OAA7B,EAAsCpB,cAAtC;AACAb,QAAQM,MAAR,CAAe2B,gBAAf,CAAgC,OAAhC,EAAyCjB,SAAzC","file":"app.js","sourcesContent":["const mainDisplay = document.querySelector('.main-display');\r\nconst helperDisplay = document.querySelector('.helper-display');\r\nconst buttons = {\r\n  digit: document.querySelectorAll('button.digit'),\r\n  operator: document.querySelectorAll('button.operator'),\r\n  clear: document.querySelector('button.clear'),\r\n  neg: document.querySelector('button.neg'),\r\n  equals: document.querySelector('button.equals')\r\n};\r\n\r\n\r\nfunction handleDigit() {\r\n  if (mainDisplay.textContent.length > 11) return;\r\n  if (Number(mainDisplay.textContent) === 0) {\r\n    mainDisplay.textContent = this.textContent;\r\n  } else if (this.textContent === '.' && mainDisplay.textContent.includes('.')) {\r\n    return;\r\n  } else {\r\n    mainDisplay.textContent += this.textContent;\r\n  }\r\n}\r\n\r\n\r\nfunction handleOperator() {\r\n  helperDisplay.textContent = `${mainDisplay.textContent} ${this.textContent}`;\r\n  mainDisplay.textContent = '';\r\n}\r\n\r\n\r\nfunction clear() {\r\n  mainDisplay.textContent = 0;\r\n  helperDisplay.textContent = '';\r\n}\r\n\r\n\r\nfunction toggleNegative() {\r\n  if (mainDisplay.textContent.startsWith('-')) {\r\n    mainDisplay.textContent = `${mainDisplay.textContent.slice(1, 11)}`;\r\n  } else {\r\n    mainDisplay.textContent = `-${mainDisplay.textContent.slice(0, 10)}`;\r\n  }\r\n}\r\n\r\n\r\nfunction calculate() {\r\n  // Nothing to calculate\r\n  if (helperDisplay.textContent === '') {\r\n    return;\r\n  }\r\n\r\n  const op = helperDisplay.textContent.slice(-1);\r\n  const num1 = Number(helperDisplay.textContent.slice(0, -2));\r\n  const num2 = Number(mainDisplay.textContent);\r\n\r\n  // Divide by zero error\r\n  if (op === '/' && num2 === 0) {\r\n    helperDisplay.textContent = '';\r\n    mainDisplay.textContent = 'Error';\r\n    return;\r\n  }\r\n\r\n  const result = doMaths(op, num1, num2);\r\n  const output = formatResult(result);\r\n\r\n  displayAnswer(output);\r\n}\r\n\r\n\r\nfunction doMaths(op, num1, num2) {\r\n  let result;\r\n  if (op === '+') {\r\n    result = num1 + num2;\r\n  } else if (op === '-') {\r\n    result = num1 - num2;\r\n  } else if (op === 'Ã—') {\r\n    result = num1 * num2;\r\n  } else if (op === '/') {\r\n    result = num1 / num2;\r\n  } else if (op === '%') {\r\n    result = num1 * (num2 / 100);\r\n  }\r\n  return result;\r\n}\r\n\r\n\r\nfunction formatResult(num) {\r\n  return num\r\n    .toFixed(11) // To string, not too long, properly rounded\r\n    .replace(/0+$/, '') // Remove any trailing zeroes\r\n    .replace(/\\.$/, ''); // Remove trailing period\r\n}\r\n\r\n\r\nfunction displayAnswer(ans) {\r\n  mainDisplay.classList.add('answer');\r\n  helperDisplay.textContent = '';\r\n  mainDisplay.textContent = ans;\r\n\r\n  document.querySelectorAll('.calculator button').forEach(btn => {\r\n    btn.addEventListener('click', clearAnswer)\r\n  });\r\n}\r\n\r\n\r\nfunction clearAnswer() {\r\n  if (this.classList.contains('equals')) return; // Don't change anything if the user clicked equals again\r\n\r\n  document.querySelectorAll('.calculator button').forEach(btn => {\r\n    btn.removeEventListener('click', clearAnswer)\r\n  });\r\n  mainDisplay.classList.remove('answer');\r\n  mainDisplay.textContent = this.classList.contains('operator') ? '' : 0;\r\n}\r\n\r\nbuttons.digit.forEach(num => num.addEventListener('click', handleDigit));\r\nbuttons.operator.forEach(op => op.addEventListener('click', handleOperator));\r\nbuttons.clear.addEventListener('click', clear);\r\nbuttons.neg.addEventListener('click', toggleNegative);\r\nbuttons.equals.addEventListener('click', calculate);"]}