{"version":3,"sources":["clickHandlers.js","dom.js","otherScripts.js"],"names":["handleKey","e","key","handleDigit","match","handleOperator","handleNegative","handleEquals","handleClear","digit","textContent","toDisplay","freshStart","mainDisplay","slice","operator","helperDisplay","result","calculate","isNaN","startsWith","Number","endsWith","displayResult","formatResult","document","querySelector","allButtons","querySelectorAll","buttons","clear","neg","equals","forEach","num","addEventListener","op","display","classList","contains","num1","num2","doMaths","divideByZero","toFixed","replace","add","btn","clearAnswer","remove","removeEventListener"],"mappings":";;AAAA,SAASA,SAAT,CAAmBC,CAAnB,EAAsB;AACpB,MAAIA,EAAEC,GAAF,IAAS,CAAT,IAAcD,EAAEC,GAAF,IAAS,CAA3B,EAA8BC,YAAYF,EAAEC,GAAd,EAA9B,KACK,IAAID,EAAEC,GAAF,CAAME,KAAN,CAAY,WAAZ,CAAJ,EAA8BC,eAAeJ,EAAEC,GAAjB,EAA9B,KACA,IAAID,EAAEC,GAAF,KAAU,GAAd,EAAmBI,iBAAnB,KACA,IAAIL,EAAEC,GAAF,CAAME,KAAN,CAAY,WAAZ,CAAJ,EAA8BG,eAA9B,KACA,IAAIN,EAAEC,GAAF,CAAME,KAAN,CAAY,uBAAZ,CAAJ,EAA0CI;AAChD;;AAED,SAASL,WAAT,CAAqBD,GAArB,EAA0B;AACxB;AACA,QAAMO,QAAQ,OAAOP,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgC,KAAKQ,WAAnD;;AAEA;AACA,QAAMC,YAAYC,WAAWC,WAAX,IAA0BJ,KAA1B,GAAkCI,YAAYH,WAAZ,GAA0BD,KAA9E;;AAEAI,cAAYH,WAAZ,GAA0BC,UAAUG,KAAV,CAAgB,CAAhB,EAAmB,EAAnB,CAA1B,CAPwB,CAO0B;AACnD;;AAGD,SAAST,cAAT,CAAwBH,GAAxB,EAA6B;AAC3B,MAAIa,WAAW,OAAOb,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgC,KAAKQ,WAApD;;AAEA,MAAIK,aAAa,GAAjB,EAAsBA,WAAW,GAAX;;AAEtB;AACA,MAAIC,cAAcN,WAAd,CAA0BN,KAA1B,CAAgC,WAAhC,KAAgDS,YAAYH,WAAZ,KAA4B,EAAhF,EAAoF;AAClF,UAAMO,SAASC,WAAf;AACA,QAAI,CAACC,MAAMF,MAAN,CAAL,EAAoB;AAClBD,oBAAcN,WAAd,GAA6B,GAAEO,MAAO,IAAGF,QAAS,EAAlD;AACD,KAFD,MAEO;AACLC,oBAAcN,WAAd,GAA4B,EAA5B;AACAG,kBAAYH,WAAZ,GAA0B,OAA1B;AACA;AACD;AACF;AACD;AAVA,OAWK,IAAIM,cAAcN,WAAd,CAA0BN,KAA1B,CAAgC,WAAhC,CAAJ,EAAkD;AACrDY,oBAAcN,WAAd,GAA6B,GAAEM,cAAcN,WAAd,CAA0BI,KAA1B,CAAgC,CAAhC,EAAmC,CAAC,CAApC,CAAuC,IAAGC,QAAS,EAAlF;AACD;AACD;AAHK,SAIA;AACHC,sBAAcN,WAAd,GAA6B,GAAEG,YAAYH,WAAY,IAAGK,QAAS,EAAnE;AACD;;AAEDF,cAAYH,WAAZ,GAA0B,EAA1B;AACD;;AAGD,SAASJ,cAAT,GAA0B;AACxB,MAAIO,YAAYH,WAAZ,CAAwBU,UAAxB,CAAmC,GAAnC,CAAJ,EAA6C;AAC3CP,gBAAYH,WAAZ,GAA2B,GAAEG,YAAYH,WAAZ,CAAwBI,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,CAAqC,EAAlE;AACD,GAFD,MAEO;AACLD,gBAAYH,WAAZ,GAA2B,IAAGG,YAAYH,WAAZ,CAAwBI,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,CAAqC,EAAnE;AACD;;AAED;AACA,MAAIO,OAAOR,YAAYH,WAAnB,MAAoC,CAAxC,EAA2C;AACzCG,gBAAYH,WAAZ,GAA2B,GAAEG,YAAYH,WAAZ,CAAwBI,KAAxB,CAA8B,CAA9B,EAAiC,CAAC,CAAlC,CAAqC,EAAlE;AACD;AACF;;AAGD,SAASP,YAAT,GAAwB;AACtB;AACA,MAAIS,cAAcN,WAAd,CAA0BY,QAA1B,CAAmC,GAAnC,CAAJ,EAA6C;;AAE7C,QAAML,SAASC,WAAf;;AAEAF,gBAAcN,WAAd,GAA6B,GAAEM,cAAcN,WAAY,IAAGG,YAAYH,WAAY,IAApF;AACAO,aAAW,OAAX,GAAqBM,cAAcN,MAAd,CAArB,GAA6CM,cAAcC,aAAaH,OAAOJ,MAAP,CAAb,CAAd,CAA7C;AACD;;AAGD,SAAST,WAAT,GAAuB;AACrBK,cAAYH,WAAZ,GAA0B,CAA1B;AACAM,gBAAcN,WAAd,GAA4B,EAA5B;AACD;;;AC5ED,MAAMG,cAAcY,SAASC,aAAT,CAAuB,eAAvB,CAApB;AACA,MAAMV,gBAAgBS,SAASC,aAAT,CAAuB,iBAAvB,CAAtB;AACA,MAAMC,aAAaF,SAASG,gBAAT,CAA0B,oBAA1B,CAAnB;AACA,MAAMC,UAAU;AACdpB,SAAOgB,SAASG,gBAAT,CAA0B,QAA1B,CADO;AAEdb,YAAUU,SAASG,gBAAT,CAA0B,WAA1B,CAFI;AAGdE,SAAOL,SAASC,aAAT,CAAuB,QAAvB,CAHO;AAIdK,OAAKN,SAASC,aAAT,CAAuB,MAAvB,CAJS;AAKdM,UAAQP,SAASC,aAAT,CAAuB,SAAvB;AALM,CAAhB;;AAQAG,QAAQpB,KAAR,CAAcwB,OAAd,CAAsBC,OAAOA,IAAIC,gBAAJ,CAAqB,OAArB,EAA8BhC,WAA9B,CAA7B;AACA0B,QAAQd,QAAR,CAAiBkB,OAAjB,CAAyBG,MAAMA,GAAGD,gBAAH,CAAoB,OAApB,EAA6B9B,cAA7B,CAA/B;AACAwB,QAAQE,GAAR,CAAYI,gBAAZ,CAA6B,OAA7B,EAAsC7B,cAAtC;AACAuB,QAAQG,MAAR,CAAeG,gBAAf,CAAgC,OAAhC,EAAyC5B,YAAzC;AACAsB,QAAQC,KAAR,CAAcK,gBAAd,CAA+B,OAA/B,EAAwC3B,WAAxC;AACAiB,SAASU,gBAAT,CAA0B,OAA1B,EAAmCnC,SAAnC;;;AChBA,SAASY,UAAT,CAAoByB,OAApB,EAA6B;AAC3B,SAAQA,QAAQC,SAAR,CAAkBC,QAAlB,CAA2B,QAA3B,KACLF,QAAQ3B,WAAR,IAAuB,CAAvB,IAA4B,CAAC2B,QAAQ3B,WAAR,CAAoBN,KAApB,CAA0B,QAA1B,CADhC;AAED;;AAGD,SAASc,SAAT,GAAqB;AACnB,QAAMkB,KAAKpB,cAAcN,WAAd,CAA0BI,KAA1B,CAAgC,CAAC,CAAjC,KAAuC,EAAlD;AACA,QAAM0B,OAAOnB,OAAOL,cAAcN,WAAd,CAA0BI,KAA1B,CAAgC,CAAhC,EAAmC,CAAC,CAApC,CAAP,KAAkD,EAA/D;AACA,QAAM2B,OAAOpB,OAAOR,YAAYH,WAAnB,KAAmC,EAAhD;;AAEA,SAAOgC,QAAQN,EAAR,EAAYI,IAAZ,EAAkBC,IAAlB,CAAP;AACD;;AAGD,SAASC,OAAT,CAAiBN,EAAjB,EAAqBI,IAArB,EAA2BC,IAA3B,EAAiC;AAC/B,MAAIxB,MAAJ;AACA,MAAI0B,aAAaP,EAAb,EAAiBK,IAAjB,CAAJ,EAA4BxB,SAAS,OAAT,CAA5B,KACK,IAAImB,OAAO,GAAX,EAAgBnB,SAASuB,OAAOC,IAAhB,CAAhB,KACA,IAAIL,OAAO,GAAX,EAAgBnB,SAASuB,OAAOC,IAAhB,CAAhB,KACA,IAAIL,OAAO,GAAX,EAAgBnB,SAASuB,OAAOC,IAAhB,CAAhB,KACA,IAAIL,OAAO,GAAX,EAAgBnB,SAASuB,OAAOC,IAAhB,CAAhB,KACA,IAAIL,OAAO,GAAX,EAAgBnB,SAASuB,QAAQC,OAAO,GAAf,CAAT,CAAhB,KACAxB,SAASI,OAAOR,YAAYH,WAAnB,KAAmC,CAA5C;;AAEL,SAAOO,MAAP;AACD;;AAGD,SAAS0B,YAAT,CAAsBP,EAAtB,EAA0BF,GAA1B,EAA+B;AAC7B,SAAQE,OAAO,GAAP,IAAcF,OAAO,CAA7B;AACD;;AAGD,SAASV,YAAT,CAAsBU,GAAtB,EAA2B;AACzB,SAAOA,IACJU,OADI,CACI,EADJ,EACQ;AADR,GAEJC,OAFI,CAEI,KAFJ,EAEW,EAFX,EAEe;AAFf,GAGJA,OAHI,CAGI,KAHJ,EAGW,EAHX,EAGe;AAHf,GAIJ/B,KAJI,CAIE,CAJF,EAIK,EAJL,CAAP,CADyB,CAKR;AAClB;;AAGD,SAASS,aAAT,CAAuBN,SAAS,EAAhC,EAAoC;AAClCJ,cAAYyB,SAAZ,CAAsBQ,GAAtB,CAA0B,QAA1B;AACAjC,cAAYH,WAAZ,GAA0BO,MAA1B;;AAEAU,aAAWM,OAAX,CAAmBc,OAAOA,IAAIZ,gBAAJ,CAAqB,OAArB,EAA8Ba,WAA9B,CAA1B;AACD;;AAGD,SAASA,WAAT,GAAuB;AACrB,MAAI,KAAKV,SAAL,CAAeC,QAAf,CAAwB,QAAxB,CAAJ,EAAuC,OADlB,CAC0B;;AAE/C1B,cAAYyB,SAAZ,CAAsBW,MAAtB,CAA6B,QAA7B;AACAtB,aAAWM,OAAX,CAAmBc,OAAOA,IAAIG,mBAAJ,CAAwB,OAAxB,EAAiCF,WAAjC,CAA1B;;AAEA;AACA,MAAI,KAAKV,SAAL,CAAeC,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;;AAEzCvB,gBAAcN,WAAd,GAA4B,EAA5B;AACD","file":"app.js","sourcesContent":["function handleKey(e) {\r\n  if (e.key >= 0 && e.key <= 9) handleDigit(e.key);\r\n  else if (e.key.match(/^[%/*+-]$/)) handleOperator(e.key);\r\n  else if (e.key === '.') handleNegative();\r\n  else if (e.key.match(/^=|Enter$/)) handleEquals();\r\n  else if (e.key.match(/^Backspace|Delete|C$/i)) handleClear();\r\n}\r\n\r\nfunction handleDigit(key) {\r\n  // const digit = (key >= 0 && key <= 9) ? key : this.textContent;\r\n  const digit = typeof key === 'string' ? key : this.textContent;\r\n\r\n  // Is this a brand new number, or add it to the end of what's already there?\r\n  const toDisplay = freshStart(mainDisplay) ? digit : mainDisplay.textContent + digit;\r\n\r\n  mainDisplay.textContent = toDisplay.slice(0, 11); // Ensure it's not too long\r\n}\r\n\r\n\r\nfunction handleOperator(key) {\r\n  let operator = typeof key === 'string' ? key : this.textContent;\r\n\r\n  if (operator === '*') operator = '×';\r\n\r\n  // User wants to chain operations and avoid clicking Equals\r\n  if (helperDisplay.textContent.match(/^[%/×+-]$/) && mainDisplay.textContent !== '') {\r\n    const result = calculate();\r\n    if (!isNaN(result)) {\r\n      helperDisplay.textContent = `${result} ${operator}`;\r\n    } else {\r\n      helperDisplay.textContent = '';\r\n      mainDisplay.textContent = 'Error';\r\n      return;\r\n    }\r\n  }\r\n  // Or change the current operator\r\n  else if (helperDisplay.textContent.match(/^[%/×+-]$/)) {\r\n    helperDisplay.textContent = `${helperDisplay.textContent.slice(0, -1)} ${operator}`;\r\n  }\r\n  // Or just add this operator\r\n  else {\r\n    helperDisplay.textContent = `${mainDisplay.textContent} ${operator}`;\r\n  }\r\n\r\n  mainDisplay.textContent = '';\r\n}\r\n\r\n\r\nfunction handleNegative() {\r\n  if (mainDisplay.textContent.startsWith('-')) {\r\n    mainDisplay.textContent = `${mainDisplay.textContent.slice(1, 11)}`;\r\n  } else {\r\n    mainDisplay.textContent = `-${mainDisplay.textContent.slice(0, 10)}`;\r\n  }\r\n\r\n  // If it was 0 and user clicked neg, don't show the 0 anymore\r\n  if (Number(mainDisplay.textContent) === 0) {\r\n    mainDisplay.textContent = `${mainDisplay.textContent.slice(0, -1)}`\r\n  }\r\n}\r\n\r\n\r\nfunction handleEquals() {\r\n  // If they're just clicking again, we don't need to do anything\r\n  if (helperDisplay.textContent.endsWith('=')) return;\r\n\r\n  const result = calculate();\r\n\r\n  helperDisplay.textContent = `${helperDisplay.textContent} ${mainDisplay.textContent} =`;\r\n  result === 'Error' ? displayResult(result) : displayResult(formatResult(Number(result)));\r\n}\r\n\r\n\r\nfunction handleClear() {\r\n  mainDisplay.textContent = 0;\r\n  helperDisplay.textContent = '';\r\n}","const mainDisplay = document.querySelector('.main-display');\r\nconst helperDisplay = document.querySelector('.helper-display');\r\nconst allButtons = document.querySelectorAll('.calculator button');\r\nconst buttons = {\r\n  digit: document.querySelectorAll('.digit'),\r\n  operator: document.querySelectorAll('.operator'),\r\n  clear: document.querySelector('.clear'),\r\n  neg: document.querySelector('.neg'),\r\n  equals: document.querySelector('.equals')\r\n};\r\n\r\nbuttons.digit.forEach(num => num.addEventListener('click', handleDigit));\r\nbuttons.operator.forEach(op => op.addEventListener('click', handleOperator));\r\nbuttons.neg.addEventListener('click', handleNegative);\r\nbuttons.equals.addEventListener('click', handleEquals);\r\nbuttons.clear.addEventListener('click', handleClear);\r\ndocument.addEventListener('keyup', handleKey);\r\n","function freshStart(display) {\r\n  return (display.classList.contains('answer') ||\r\n    (display.textContent == 0 && !display.textContent.match(/[\\.\\-]/)));\r\n}\r\n\r\n\r\nfunction calculate() {\r\n  const op = helperDisplay.textContent.slice(-1) || '';\r\n  const num1 = Number(helperDisplay.textContent.slice(0, -2)) || '';\r\n  const num2 = Number(mainDisplay.textContent) || '';\r\n\r\n  return doMaths(op, num1, num2);\r\n}\r\n\r\n\r\nfunction doMaths(op, num1, num2) {\r\n  let result;\r\n  if (divideByZero(op, num2)) result = 'Error';\r\n  else if (op === '+') result = num1 + num2;\r\n  else if (op === '-') result = num1 - num2;\r\n  else if (op === '×') result = num1 * num2;\r\n  else if (op === '/') result = num1 / num2;\r\n  else if (op === '%') result = num1 * (num2 / 100);\r\n  else result = Number(mainDisplay.textContent) || 0;\r\n\r\n  return result;\r\n}\r\n\r\n\r\nfunction divideByZero(op, num) {\r\n  return (op === '/' && num == 0);\r\n}\r\n\r\n\r\nfunction formatResult(num) {\r\n  return num\r\n    .toFixed(10) // To string, not too long, properly rounded\r\n    .replace(/0+$/, '') // Remove any trailing zeroes\r\n    .replace(/\\.$/, '') // Remove trailing period\r\n    .slice(0, 10); // Necessary if it's a really big number with lots of decimals\r\n}\r\n\r\n\r\nfunction displayResult(result = '') {\r\n  mainDisplay.classList.add('answer');\r\n  mainDisplay.textContent = result;\r\n\r\n  allButtons.forEach(btn => btn.addEventListener('click', clearAnswer));\r\n}\r\n\r\n\r\nfunction clearAnswer() {\r\n  if (this.classList.contains('equals')) return; // Don't change anything if the user clicked equals again\r\n\r\n  mainDisplay.classList.remove('answer');\r\n  allButtons.forEach(btn => btn.removeEventListener('click', clearAnswer));\r\n\r\n  // If they're doing another calculation, don't mess it up by clearing the display\r\n  if (this.classList.contains('operator')) return;\r\n\r\n  helperDisplay.textContent = '';\r\n}"]}